
let data = {
   "PBFEC": [
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201807,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 15384.62,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201808,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201809,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201810,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201811,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201812,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201901,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201902,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201903,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201904,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201905,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XG10",
         "Resbud(T)": "Studentships",
         "Sub-Project": "302906-01",
         "Period": 201906,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201807,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": -30000,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201808,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201809,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201810,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201811,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201812,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201901,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201902,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201903,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201904,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201905,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201906,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": -2500,
         "Curr. amount": -2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201807,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 3215.38,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201808,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201809,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201810,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201811,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201812,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201901,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201902,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201903,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201904,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201905,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XT10",
         "Resbud(T)": "Student Matric Fees",
         "Sub-Project": "302906-01",
         "Period": 201906,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201807,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 11400,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201808,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201809,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201810,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201811,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201812,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201901,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201902,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201903,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201904,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201905,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XW10",
         "Resbud(T)": "Others",
         "Sub-Project": "302906-01",
         "Period": 201906,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 0,
         "Curr. amount": 0,
         "PCB Budget": 0,
         "Amendment": 0
      }
   ],
   "PBPRICE": [
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201807,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 30000,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201808,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201809,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201810,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201811,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201812,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201901,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201902,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201903,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201904,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201905,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      },
      {
         "Resbud": "XZ90",
         "Resbud(T)": "Income",
         "Sub-Project": "302906-01",
         "Period": 201906,
         "Description": "Project: 302906 Proposed Start: 01/02/2018 - Proposed End: 31/07/2021",
         "Amount": 2500,
         "Curr. amount": 2500,
         "PCB Budget": 0,
         "Amendment": 0
      }
   ]
}


const FEC = 'PBFEC'
const PRICE = 'PBPRICE'
const RESBUD = 'Resbud'
const NEW_BUDGET = 'PCB Budget'
const CURR_AMOUNT = 'Curr. amount'
const SUB_PROJECT = 'Sub-Project'
const DESCRIPTION = 'Description'
const PERIOD = 'Period'


const extractCurrentBudgetData = source => ({
    amount: source[CURR_AMOUNT],
    subProject: source[SUB_PROJECT],
    period: source[PERIOD],
    description: source[DESCRIPTION]
})


const extractData = source => {
    
    let extractedData = {}
    
    source.forEach( record => {
        if ( extractedData[record[RESBUD]] === undefined ) {
            extractedData[record[RESBUD]] = {            
                currentBudgetTotal: record[CURR_AMOUNT],
                currentBudgetData: [extractCurrentBudgetData(record)],
                newBudgetTotal: record[NEW_BUDGET],
                newBudgetData: []
            }
            
        } else {
            // Update currentBudget:
            extractedData[record[RESBUD]].currentBudgetTotal = extractedData[record[RESBUD]].currentBudgetTotal + record[CURR_AMOUNT]
            
            // Push current periods budget amount into current data
            extractedData[record[RESBUD]].currentBudgetData.push(extractCurrentBudgetData(record))
        }
    })
    
    return extractedData
}


const getSplitPerPeriod = (source) => {
    
    let data = {
        subProject: '',
        percentages: []
    }
    
    for (let resbud in source) {
        
        if (data.percentages.length > 0) break;
        
        let currentResbud = source[resbud]
        
        if (currentResbud.currentBudgetTotal > 0) {
            
            data.subProject = currentResbud.currentBudgetData[0].subProject
            
            currentResbud.currentBudgetData.forEach(record => {
                data.percentages.push( record.amount / currentResbud.currentBudgetTotal )
            })
            
        } else { continue }
        
    }
    
    return data
}


let fecData = extractData(data[FEC])
let priceData = extractData(data[PRICE])


// Loop over each Resbud in fecData
for (let resbud in fecData) {
    
    // Cache reference to current resbud being processed
    let currResbud = fecData[resbud]
    
    // Calculate the budget change
    let budgetChange = currResbud.newBudgetTotal - currResbud.currentBudgetTotal
    
    // If there is a budget change then there is work to do:
    if ( budgetChange !== 0 ) {
        
        document.getElementById('app').innerHTML += 'Budget change for ' + resbud + ': ' + budgetChange + '<br/>'
        
        // If brand new budget then need to use an existing budget to get percentage split per period
        if (currResbud.currentBudgetTotal === 0) {
            let data = getSplitPerPeriod(fecData)
            
            if ( data.percentages.length === 0 ) {
                document.getElementById('app').innerHTML = 'No budgets on this project - Please process manually or moan at Johnpaul to implement this feature...'
            } else {
                data.percentages.forEach( percentage => {
                    currResbud.newBudgetData.push({
                        account: resbud,
                        subProject: data.subProject,
                        amendment: currResbud.newBudgetTotal * percentage,
                        
                    })
                })
            }
        } else {
            currResbud.currentBudgetData.forEach( record => {
                currResbud.newBudgetData.push({
                    amendment: ( (record.amount / currResbud.currentBudgetTotal) * currResbud.newBudgetTotal ) - record.amount,
                    
                })
            })
        }
    }
}

console.log(fecData);
console.log(priceData);



// Reducer not currently needed
//let currentTotal = fecData['XG10'].data.reduce( (acc, curr) => acc + curr.currentAmount, 0 );
